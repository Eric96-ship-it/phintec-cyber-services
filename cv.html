<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CV Writing Services - Phintec Cyber Services</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <span class="logo-icon">üõ°Ô∏è</span>
                    <h1>Phintec Cyber Services</h1>
                </div>
                <nav>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="design.html">Graphic Design</a></li>
                        <li><a href="kra.html">KRA Services</a></li>
                        <li><a href="cv.html" class="active">CV Writing</a></li>
                        <li><a href="other-services.html">Other Services</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </nav>
                <button class="mobile-menu-btn">‚ò∞</button>
            </div>
        </div>
    </header>

    <!-- Page Header -->
    <section class="page-header">
        <div class="container">
            <h1>CV/Resume Writing Services</h1>
            <p>Professional CV writing that gets you noticed by employers</p>
        </div>
    </section>

    <!-- CV Writing Form -->
    <section class="cv-section">
        <div class="container">
            <div class="cv-form-container">
                <div class="pricing-info">
                    <h3>Pricing</h3>
                    <p>Base Price: <strong>Ksh 50</strong></p>
                    <p>Additional: <strong>Ksh 50 per 100 words</strong></p>
                    <div class="total-cost">
                        <h4>Total Cost: <span id="total-cost">Ksh 50</span></h4>
                    </div>
                    <div class="word-count">
                        <p>Word Count: <span id="word-count">0</span></p>
                    </div>
                </div>

                <!-- Formspree Integration -->
                <form id="cvForm" action="https://formspree.io/f/mnnoaerj" method="POST">
                    <input type="hidden" name="_subject" value="New CV Writing Request - Phintec Cyber">
                    <input type="hidden" name="_replyto" id="reply-to-email">
                    <input type="hidden" name="service_type" value="CV Writing">
                    <input type="hidden" name="total_cost" id="form-total-cost" value="50">
                    <input type="hidden" name="word_count" id="form-word-count" value="0">
                    
                    <div class="form-section">
                        <h3>Personal Details <span class="required">*</span></h3>
                        <div class="form-group">
                            <label for="fullName">Full Name</label>
                            <input type="text" id="fullName" name="full_name" required>
                            <span class="error-message" id="fullName-error"></span>
                        </div>
                        <div class="form-group">
                            <label for="phone">Phone Number</label>
                            <input type="tel" id="phone" name="phone_number" required>
                            <span class="error-message" id="phone-error"></span>
                        </div>
                        <div class="form-group">
                            <label for="email">Email Addres</label>
                            <input type="email" id="email" name="email" required>
                            <span class="error-message" id="email-error"></span>
                        </div>
                         <div class="form-group">
                            <label for="email">ID Number</label>
                            <input type="email" id="email" name="email" required>
                            <span class="error-message" id="email-error"></span>
                        </div>
                         <div class="form-group">
                            <label for="email">Date of Birth</label>
                            <input type="email" id="email" name="email" required>
                            <span class="error-message" id="email-error"></span>
                        </div>
                         <div class="form-group">
                            <label for="email">Gender</label>
                            <input type="email" id="email" name="email" required>
                            <span class="error-message" id="email-error"></span>
                        </div>
                        <div class="form-group">
                            <label for="address">Nationality</label>
                            <input type="text" id="address" name="address">
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Personal Profile <span class="required">*</span></h3>
                        <div class="form-group">
                            <label for="personalProfile">Write your personal profile/summary</label>
                            <textarea id="personalProfile" name="personal_profile" rows="4" required placeholder="Brief professional summary highlighting your key skills and experience..."></textarea>
                            <span class="error-message" id="personalProfile-error"></span>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Career Summary <span class="required">*</span></h3>
                        <div class="form-group">
                            <label for="careerSummary">Career objectives or summary</label>
                            <textarea id="careerSummary" name="career_summary" rows="4" required placeholder="Your career goals and what you're looking for..."></textarea>
                            <span class="error-message" id="careerSummary-error"></span>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Work Experience <span class="required">*</span></h3>
                        <div id="workExperience">
                            <div class="experience-item">
                                <div class="form-group">
                                    <label>Job Title</label>
                                    <input type="text" class="jobTitle" name="job_title[]" required placeholder="e.g. Sales Manager">
                                </div>
                                <div class="form-group">
                                    <label>Company</label>
                                    <input type="text" class="company" name="company[]" required placeholder="Company Name">
                                </div>
                                <div class="form-group">
                                    <label>Duration</label>
                                    <input type="text" class="duration" name="duration[]" required placeholder="e.g. Jan 2020 - Present">
                                </div>
                                <div class="form-group">
                                    <label>Responsibilities</label>
                                    <textarea class="responsibilities" name="responsibilities[]" rows="3" required placeholder="Key responsibilities and achievements..."></textarea>
                                </div>
                                <button type="button" class="btn btn-outline remove-btn">Remove</button>
                            </div>
                        </div>
                        <button type="button" id="addExperience" class="btn btn-outline">Add Another Experience</button>
                    </div>

                    <div class="form-section">
                        <h3>Education Background <span class="required">*</span></h3>
                        <div id="education">
                            <div class="education-item">
                                <div class="form-group">
                                    <label>Institution</label>
                                    <input type="text" class="institution" name="institution[]" required placeholder="University/College/School">
                                </div>
                                <div class="form-group">
                                    <label>Qualification</label>
                                    <input type="text" class="qualification" name="qualification[]" required placeholder="Degree/Diploma/Certificate">
                                </div>
                                <div class="form-group">
                                    <label>Year</label>
                                    <input type="text" class="year" name="year[]" required placeholder="e.g. 2015-2019">
                                </div>
                                <button type="button" class="btn btn-outline remove-btn">Remove</button>
                            </div>
                        </div>
                        <button type="button" id="addEducation" class="btn btn-outline">Add Another Education</button>
                    </div>

                    <div class="form-section">
                        <h3>Professional Qualifications</h3>
                        <div class="form-group">
                            <label for="professionalQualifications">List any professional certifications or qualifications</label>
                            <textarea id="professionalQualifications" name="professional_qualifications" rows="3" placeholder="e.g. CPA, Cisco Certified, etc."></textarea>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Key Skills <span class="required">*</span></h3>
                        <div class="form-group">
                            <label for="keySkills">List your key skills and competencies</label>
                            <textarea id="keySkills" name="key_skills" rows="3" required placeholder="e.g. Leadership, Communication, Technical skills..."></textarea>
                            <span class="error-message" id="keySkills-error"></span>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Referees</h3>
                        <div id="referees">
                            <div class="referee-item">
                                <div class="form-group">
                                    <label>Name</label>
                                    <input type="text" class="refName" name="referee_name[]" placeholder="Referee Name">
                                </div>
                                <div class="form-group">
                                    <label>Position</label>
                                    <input type="text" class="refPosition" name="referee_position[]" placeholder="Position/Title">
                                </div>
                                <div class="form-group">
                                    <label>Company</label>
                                    <input type="text" class="refCompany" name="referee_company[]" placeholder="Company/Organization">
                                </div>
                                <div class="form-group">
                                    <label>Contact</label>
                                    <input type="text" class="refContact" name="referee_contact[]" placeholder="Phone or Email">
                                </div>
                                <button type="button" class="btn btn-outline remove-btn">Remove</button>
                            </div>
                        </div>
                        <button type="button" id="addReferee" class="btn btn-outline">Add Another Referee</button>
                    </div>

                    <!-- Payment Section -->
                    <div class="form-section payment-section">
                        <h3>Payment Information <span class="required">*</span></h3>
                        <div class="form-group">
                            <label for="whatsapp">WhatsApp Number for Delivery <span class="required">*</span></label>
                            <input type="tel" id="whatsapp" name="whatsapp_number" required placeholder="e.g. 0712345678">
                            <span class="error-message" id="whatsapp-error"></span>
                        </div>
                        
                        <div class="form-group">
                            <label>Payment Method <span class="required">*</span></label>
                            <div class="payment-options">
                                <label class="payment-option">
                                    <input type="radio" name="payment_method" value="mpesa" required checked>
                                    <span>Lipa na M-Pesa</span>
                                </label>
                                <label class="payment-option">
                                    <input type="radio" name="payment_method" value="airtel">
                                    <span>Airtel Money</span>
                                </label>
                            </div>
                            <span class="error-message" id="payment-error"></span>
                        </div>

                        <!-- M-Pesa Details -->
                        <div id="mpesa-details" class="payment-details-box active">
                            <h4>Lipa na M-Pesa Instructions</h4>
                            <div class="payment-instruction">
                                <p><strong>Send money to this number:</strong></p>
                                <div class="payment-number">0742774083</div>
                                <p><strong>Steps:</strong></p>
                                <ol>
                                    <li>Go to M-Pesa menu</li>
                                    <li>Select <strong>Send Money</strong></li>
                                    <li>Enter Phone Number: <strong>0742774083</strong></li>
                                    <li>Enter Amount: <strong id="mpesa-amount-cv">Ksh 50</strong></li>
                                    <li>Enter your M-Pesa PIN</li>
                                    <li>Press OK</li>
                                </ol>
                                <p><em>You will receive a confirmation message with your transaction code</em></p>
                            </div>
                        </div>

                        <!-- Airtel Money Details -->
                        <div id="airtel-details" class="payment-details-box">
                            <h4>Airtel Money Instructions</h4>
                            <div class="payment-instruction">
                                <p><strong>Send money to this number:</strong></p>
                                <div class="payment-number">0742774083</div>
                                <p><strong>Steps:</strong></p>
                                <ol>
                                    <li>Go to Airtel Money menu</li>
                                    <li>Select <strong>Send Money</strong></li>
                                    <li>Enter Phone Number: <strong>0742774083</strong></li>
                                    <li>Enter Amount: <strong id="airtel-amount-cv">Ksh 50</strong></li>
                                    <li>Enter your Airtel Money PIN</li>
                                    <li>Press OK</li>
                                </ol>
                                <p><em>You will receive a confirmation message with your transaction code</em></p>
                            </div>
                        </div>

                        <!-- Transaction Code Input -->
                        <div class="form-group transaction-code-group">
                            <label for="transaction-code">Transaction Code <span class="required">*</span></label>
                            <input type="text" id="transaction-code" name="transaction_code" class="transaction-code-input" required 
                                   placeholder="e.g. TJODR58HI" maxlength="12"
                                   pattern="[A-Z0-9]{8,12}" title="Enter your transaction code (8-12 characters)">
                            <div class="transaction-code-format">
                                Format: 8-12 characters (letters and numbers only) - Found in your payment confirmation message
                            </div>
                            <span class="error-message" id="transaction-code-error"></span>
                        </div>

                        <div class="payment-confirmation">
                            <label class="checkbox-option">
                                <input type="checkbox" id="paymentConfirmed" name="payment_confirmed" required>
                                <span>I confirm that I have made the payment of <strong id="payment-amount">Ksh 50</strong> and entered the correct transaction code</span>
                            </label>
                            <span class="error-message" id="paymentConfirmed-error"></span>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="submitBtn">Submit CV Request & Verify Payment</button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>Phintec Cyber Services</h3>
                    <p>Your reliable partner for all digital solutions</p>
                </div>
                <div class="footer-section">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="about.html">About Us</a></li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Services</h4>
                    <ul>
                        <li><a href="design.html">Graphic Design</a></li>
                        <li><a href="kra.html">KRA Services</a></li>
                        <li><a href="cv.html">CV Writing</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h4>Contact Info</h4>
                    <p>Eric Mutiiria Muriuki</p>
                    <p>Phone: 0742774083</p>
                    <p>Location: Eastern Bypass, Kamakis</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2023 Phintec Cyber Services. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="js/script.js"></script>
    <script>
        // CV-specific functionality
        document.addEventListener('DOMContentLoaded', function() {
            const cvForm = document.getElementById('cvForm');
            const totalCostElement = document.getElementById('total-cost');
            const wordCountElement = document.getElementById('word-count');
            const paymentAmountElement = document.getElementById('payment-amount');
            const addExperienceBtn = document.getElementById('addExperience');
            const addEducationBtn = document.getElementById('addEducation');
            const addRefereeBtn = document.getElementById('addReferee');
            
            // Calculate CV cost based on word count
            function calculateCVCost() {
                const basePrice = 50;
                const pricePerUnit = 50;
                const unitWords = 100;
                
                let totalWords = 0;
                
                // Count words from all text areas and inputs in the CV form
                if (cvForm) {
                    const textAreas = cvForm.querySelectorAll('textarea');
                    const textInputs = cvForm.querySelectorAll('input[type="text"], input[type="email"], input[type="tel"]');
                    
                    textAreas.forEach(element => {
                        totalWords += countWords(element.value);
                    });
                    
                    textInputs.forEach(element => {
                        totalWords += countWords(element.value);
                    });
                }
                
                const additionalCost = Math.floor(totalWords / unitWords) * pricePerUnit;
                const totalCost = basePrice + additionalCost;
                
                if (totalCostElement) {
                    totalCostElement.textContent = `Ksh ${totalCost}`;
                }
                if (paymentAmountElement) {
                    paymentAmountElement.textContent = `Ksh ${totalCost}`;
                }
                
                // Update CV payment instruction amounts
                const cvMpesaAmount = document.getElementById('mpesa-amount-cv');
                const cvAirtelAmount = document.getElementById('airtel-amount-cv');
                
                if (cvMpesaAmount) cvMpesaAmount.textContent = `Ksh ${totalCost}`;
                if (cvAirtelAmount) cvAirtelAmount.textContent = `Ksh ${totalCost}`;
                
                if (wordCountElement) {
                    wordCountElement.textContent = totalWords;
                }
                
                // Update hidden form fields
                document.getElementById('form-total-cost').value = totalCost;
                document.getElementById('form-word-count').value = totalWords;
                
                return totalCost;
            }
            
            function countWords(text) {
                if (!text || text.trim() === '') return 0;
                return text.trim().split(/\s+/).filter(word => word.length > 0).length;
            }
            
            // Add event listeners to all form fields for real-time cost calculation
            if (cvForm) {
                // Add input event to the entire form for word counting
                cvForm.addEventListener('input', calculateCVCost);
                
                // Add experience section
                if (addExperienceBtn) {
                    addExperienceBtn.addEventListener('click', function() {
                        const experienceContainer = document.getElementById('workExperience');
                        const newExperience = document.createElement('div');
                        newExperience.className = 'experience-item';
                        newExperience.innerHTML = `
                            <div class="form-group">
                                <label>Job Title <span class="required">*</span></label>
                                <input type="text" class="jobTitle" name="job_title[]" required placeholder="e.g. Sales Manager">
                            </div>
                            <div class="form-group">
                                <label>Company <span class="required">*</span></label>
                                <input type="text" class="company" name="company[]" required placeholder="Company Name">
                            </div>
                            <div class="form-group">
                                <label>Duration <span class="required">*</span></label>
                                <input type="text" class="duration" name="duration[]" required placeholder="e.g. Jan 2020 - Present">
                            </div>
                            <div class="form-group">
                                <label>Responsibilities <span class="required">*</span></label>
                                <textarea class="responsibilities" name="responsibilities[]" rows="3" required placeholder="Key responsibilities and achievements..."></textarea>
                            </div>
                            <button type="button" class="btn btn-outline remove-btn">Remove</button>
                        `;
                        
                        experienceContainer.appendChild(newExperience);
                        
                        // Add remove functionality
                        const removeBtn = newExperience.querySelector('.remove-btn');
                        removeBtn.addEventListener('click', function() {
                            experienceContainer.removeChild(newExperience);
                            calculateCVCost();
                        });
                        
                        // Add input event to new fields
                        const newInputs = newExperience.querySelectorAll('input, textarea');
                        newInputs.forEach(input => {
                            input.addEventListener('input', calculateCVCost);
                        });
                    });
                }
                
                // Add education section
                if (addEducationBtn) {
                    addEducationBtn.addEventListener('click', function() {
                        const educationContainer = document.getElementById('education');
                        const newEducation = document.createElement('div');
                        newEducation.className = 'education-item';
                        newEducation.innerHTML = `
                            <div class="form-group">
                                <label>Institution <span class="required">*</span></label>
                                <input type="text" class="institution" name="institution[]" required placeholder="University/College/School">
                            </div>
                            <div class="form-group">
                                <label>Qualification <span class="required">*</span></label>
                                <input type="text" class="qualification" name="qualification[]" required placeholder="Degree/Diploma/Certificate">
                            </div>
                            <div class="form-group">
                                <label>Year <span class="required">*</span></label>
                                <input type="text" class="year" name="year[]" required placeholder="e.g. 2015-2019">
                            </div>
                            <button type="button" class="btn btn-outline remove-btn">Remove</button>
                        `;
                        
                        educationContainer.appendChild(newEducation);
                        
                        // Add remove functionality
                        const removeBtn = newEducation.querySelector('.remove-btn');
                        removeBtn.addEventListener('click', function() {
                            educationContainer.removeChild(newEducation);
                            calculateCVCost();
                        });
                        
                        // Add input event to new fields
                        const newInputs = newEducation.querySelectorAll('input, textarea');
                        newInputs.forEach(input => {
                            input.addEventListener('input', calculateCVCost);
                        });
                    });
                }
                
                // Add referee section
                if (addRefereeBtn) {
                    addRefereeBtn.addEventListener('click', function() {
                        const refereesContainer = document.getElementById('referees');
                        const newReferee = document.createElement('div');
                        newReferee.className = 'referee-item';
                        newReferee.innerHTML = `
                            <div class="form-group">
                                <label>Name</label>
                                <input type="text" class="refName" name="referee_name[]" placeholder="Referee Name">
                            </div>
                            <div class="form-group">
                                <label>Position</label>
                                <input type="text" class="refPosition" name="referee_position[]" placeholder="Position/Title">
                            </div>
                            <div class="form-group">
                                <label>Company</label>
                                <input type="text" class="refCompany" name="referee_company[]" placeholder="Company/Organization">
                            </div>
                            <div class="form-group">
                                <label>Contact</label>
                                <input type="text" class="refContact" name="referee_contact[]" placeholder="Phone or Email">
                            </div>
                            <button type="button" class="btn btn-outline remove-btn">Remove</button>
                        `;
                        
                        refereesContainer.appendChild(newReferee);
                        
                        // Add remove functionality
                        const removeBtn = newReferee.querySelector('.remove-btn');
                        removeBtn.addEventListener('click', function() {
                            refereesContainer.removeChild(newReferee);
                            calculateCVCost();
                        });
                        
                        // Add input event to new fields
                        const newInputs = newReferee.querySelectorAll('input, textarea');
                        newInputs.forEach(input => {
                            input.addEventListener('input', calculateCVCost);
                        });
                    });
                }
                
                // Add remove functionality to initial remove buttons
                const initialRemoveBtns = document.querySelectorAll('.remove-btn');
                initialRemoveBtns.forEach(btn => {
                    btn.addEventListener('click', function() {
                        const parentItem = this.closest('.experience-item, .education-item, .referee-item');
                        if (parentItem) {
                            parentItem.remove();
                            calculateCVCost();
                        }
                    });
                });
                
                // Handle form submission
                cvForm.addEventListener('submit', function(e) {
                    // Update final values before submission
                    document.getElementById('reply-to-email').value = document.getElementById('email').value;
                    
                    // Optional: Add loading state
                    const submitBtn = document.getElementById('submitBtn');
                    const originalText = submitBtn.innerHTML;
                    submitBtn.innerHTML = 'Submitting...';
                    submitBtn.disabled = true;
                    
                    // Form will submit to Formspree automatically
                    // Formspree will handle the redirect/response
                });
            }
            
            // Payment method toggle - FIXED VERSION
            function setupPaymentDetailsToggle() {
                const paymentRadios = document.querySelectorAll('input[name="payment_method"]');
                const paymentDetailsBoxes = document.querySelectorAll('.payment-details-box');
                
                // Hide all payment details first
                paymentDetailsBoxes.forEach(box => {
                    box.classList.remove('active');
                });
                
                // Show the currently selected payment method
                const selectedMethod = document.querySelector('input[name="payment_method"]:checked').value;
                const activeDetailsBox = document.getElementById(`${selectedMethod}-details`);
                if (activeDetailsBox) {
                    activeDetailsBox.classList.add('active');
                }
                
                // Add change event listeners
                paymentRadios.forEach(radio => {
                    radio.addEventListener('change', function() {
                        // Hide all payment details boxes
                        paymentDetailsBoxes.forEach(box => {
                            box.classList.remove('active');
                        });
                        
                        // Show the selected payment details
                        const selectedMethod = this.value;
                        const detailsBox = document.getElementById(`${selectedMethod}-details`);
                        if (detailsBox) {
                            detailsBox.classList.add('active');
                        }
                    });
                });
            }
            
            // Initialize cost calculation and payment toggle
            calculateCVCost();
            setupPaymentDetailsToggle();
            
            // Check for Formspree success in URL parameters
            const urlParams = new URLSearchParams(window.location.search);
            if (urlParams.get('success') === 'true') {
                alert('Thank you! Your CV request has been submitted successfully. We will process your order and contact you shortly.');
                // Optional: Clear form or redirect
                window.history.replaceState({}, document.title, window.location.pathname);
            }
        });
    </script>
</body>
</html>
